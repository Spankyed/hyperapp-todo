!function(){"use strict";function t(t){Array.isArray(t)?t.forEach(function(t){x.push(t)}):x.push({event:t.event,element:t.element,targetEl:t.targetEl,callback:t.callback})}function e(t,e){function n(n,o,r,a,i){var u;n||(n="body"),"string"==typeof n?u=document.querySelector(n):n.nodeName&&(u=n);var l=function(n){var o=n.target,i=Array.prototype.slice.apply(u.querySelectorAll(r));do{for(var l=i.length,c=0;c<l;c++)if(o===i[c]){a.call(i[c],n,t,e);break}}while(o=o.parentNode)};x[i].delegatedCallback=a,x[i].callback=l,u.addEventListener(o,l)}x.forEach(function(t,e){var o;if(o="string"==typeof t.element?document.querySelector(t.element):document.querySelector("body"),t.targetEl)n(t.element,t.event,t.targetEl,t.callback,e);else{o.addEventListener(t.event,t.callback)}})}function n(t,e,n){if(e&&("string"==typeof t&&(t=document.querySelector(t)),document.createEvent)){var o=document.createEvent("Events");o.initEvent(e,!0,!1),o.data=n,t.dispatchEvent(o)}}var o=function(t,e){for(var n,o=arguments,r=[],a=[],i=arguments.length;i-- >2;)r[r.length]=o[i];for(;r.length;)if(Array.isArray(n=r.pop()))for(var i=n.length;i--;)r[r.length]=n[i];else null!=n&&!0!==n&&!1!==n&&("number"==typeof n&&(n+=""),a[a.length]=n);return"string"==typeof t?{tag:t,data:e||{},children:a}:t(e,a)},r=function(){return(""+1e7+-1e3+-4e3+-8e3+-1e11).replace(/1|0/g,function(){return(0|16*Math.random()).toString(16)})},a=function(t){return t.todos.concat({done:!1,editing:!1,id:r(),value:t.input})},i=function(t,e){return t.todos.filter(function(t){return e.target.dataset.uuid!==t.id})},u=function(t,e){return t.todos.map(function(t){return e.target.dataset.uuid===t.id?Object.assign({},t,{done:!t.done}):t})},l=function(t,e){return t.todos.map(function(t){return e.target.dataset.uuid===t.id?Object.assign({},t,{value:e.target.textContent}):t})},c={add:function(t){return{input:"",todos:a(t)}},input:function(t,e,n){return{input:n.target.value}},remove:function(t,e,n){return{todos:i(t,n)}},toggle:function(t,e,n){return{todos:u(t,n)}},edit:function(t,e,n){return{todos:l(t,n)}},editEnter:function(t,e,n){n.target.blur()}},d=function(t){return window.localStorage.setItem("todoapp",JSON.stringify(t))},s=function(){return JSON.parse(window.localStorage.getItem("todoapp"))}()||{input:"",placeholder:"Add new todo",todos:[]},f=document.getElementById("todo"),v=function(){return o("header",null,o("h2",null,"todo crud touch"," ",o("a",{href:"https://github.com/marcusasplund/hyperapp-todo/"},o("small",null,"source"))))},g=function(t){var e=t.id,n=t.actions;return o("button",{class:"button button-small button-outline",id:e,onclick:n.remove},"x")},p=function(t){var e=t.id,n=t.actions;return o("button",{class:"button button-small button-outline",id:e,onclick:function(t){return n.toggle(t)}},"âœ“")},m="ontouchstart"in window||window.navigator.pointerEnabled||window.navigator.msPointerEnabled,h=function(t){var e=t.todo,n=t.actions;return o("div",null," ",m?o("div",{class:e.done?"done item row":"item row",contenteditable:!0,"data-uuid":e.id,onkeyup:function(t){return 13===t.keyCode?n.editEnter(t):null},oninput:function(t){return e.value=t.target.textContent||""},onblur:n.edit},e.value):o("div",{class:"row"},o("div",{class:"column column-15"},o(g,{actions:n,id:e.id}),o(p,{actions:n,id:e.id})),o("div",{class:e.done?"done column column-85":"column column-85",contenteditable:!0,"data-uuid":e.id,onkeyup:function(t){return 13===t.keyCode?n.editEnter(t):null},oninput:function(t){return e.value=t.target.textContent||""},onblur:n.edit},e.value))," ")},y=function(t){var e=t.state,n=t.actions;return o("div",{id:"todo-list"},m?o("p",null,o("small",null,"swipe left to toggle, right to remove, tap to edit")):null,e.todos.filter(function(t){return!t.done}).map(function(t){return o(h,{todo:t,actions:n})}))},b=function(t){var e=t.state,n=t.actions;return o("div",{class:"row"},o("input",{type:"text",onkeyup:function(t){return 13===t.keyCode&&""!==t.target.value?n.add():null},oninput:n.input,value:e.input,placeholder:e.placeholder}))},w=function(t){var e=t.state,n=t.actions;return o("div",{id:"todo-list-done"},e.todos.filter(function(t){return t.done}).map(function(t){return o(h,{todo:t,actions:n})}))},E=function(t){var e=t.state;return o("pre",null,o("code",null,JSON.stringify(e,null,2)))},k=function(t){var e=t.state,n=t.actions;return o("div",{class:"container"},o(v,null),o(y,{state:e,actions:n}),o(b,{state:e,actions:n}),o(w,{state:e,actions:n}),o(E,{state:e}))},S=function(t,e){return o(k,{state:t,actions:e})},x=[];window.eventCache=x;var T,A,C;window.navigator.pointerEnabled?(T="pointerdown",A="pointerup",C="pointermove"):window.navigator.msPointerEnabled?(T="MSPointerDown",A="MSPointerUp",C="MSPointerMove"):"ontouchstart"in window?(T="touchstart",A="touchend",C="touchmove"):(T="mousedown",A="click",C="mousemove");!function(){function t(t){return"tagName"in t?t:t.parentNode}function e(t,e,n,o){return Math.abs(t-e)>=Math.abs(n-o)?t-e>0?"left":"right":n-o>0?"up":"down"}function o(){if(s=null,c.last)try{c&&c.el&&(n(c.el,"longtap"),c={})}catch(t){}}function r(){s&&clearTimeout(s),s=null}function a(){i&&clearTimeout(i),l&&clearTimeout(l),u&&clearTimeout(u),s&&clearTimeout(s),i=l=u=s=null,c={}}var i,u,l,c={},d=150;/android/gim.test(navigator.userAgent)&&(d=200);var s;!function(){var f,v,g=document.body,p=!1;g.addEventListener(T,function(e){if(f=Date.now(),v=f-(c.last||f),e.originalEvent&&(e=e.originalEvent),"mousedown"===T)c.el=t(e.target),"ripple"===e.target.nodeName&&(c.el=e.target.parentNode),i&&clearTimeout(i),c.x1=e.pageX,c.y1=e.pageY,p=!1;else if(1===e.touches.length){if(e.target.disabled)return;c.el=t(e.touches[0].target),i&&clearTimeout(i),c.x1=e.touches[0].pageX,c.y1=e.touches[0].pageY,p=2===e.targetTouches.length}v>0&&v<=450&&(c.isDoubleTap=!0),c.last=f,s=setTimeout(o,750)}),g.addEventListener(C,function(t){t.originalEvent&&(t=t.originalEvent),r(),"mousemove"===C?(c.x2=t.pageX,c.y2=t.pageY):1===t.touches.length&&(c.x2=t.touches[0].pageX,c.y2=t.touches[0].pageY,c.move=!0)}),g.addEventListener(A,function(t){r(),c.el&&(c.x2&&Math.abs(c.x1-c.x2)>20||c.y2&&Math.abs(c.y1-c.y2)>20?u=setTimeout(function(){c&&c.el&&(n(c.el,"swipe"),n(c.el,"swipe"+e(c.x1,c.x2,c.y1,c.y2)),c={})},0):"last"in c&&(l=setTimeout(function(){c&&c.isDoubleTap?c&&c.el&&(n(c.el,"doubletap"),t.preventDefault(),c={}):i=setTimeout(function(){i=null,c&&c.el&&!c.move?(n(c.el,"tap"),c={}):a()},d)},0)))}),g.addEventListener("touchcancel",a)}()}();var N={render:function(t){return d(t)},loaded:function(n,o){t([{element:"#todo-list",targetEl:".item",event:"swipeleft",callback:o.toggle.bind(n)},{element:"#todo-list",targetEl:".item",event:"swiperight",callback:o.remove.bind(n)},{element:"#todo-list-done",targetEl:".item",event:"swipeleft",callback:o.toggle.bind(n)},{element:"#todo-list-done",targetEl:".item",event:"swiperight",callback:o.remove.bind(n)}]),e(n,o)}};"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("service-worker.js").then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){switch(e.state){case"installed":navigator.serviceWorker.controller}}}}).catch(function(t){})}),function(t){function e(t,n,i){Object.keys(n||[]).map(function(u){var l=n[u],c=i?i+"."+u:u;"function"==typeof l?t[u]=function(t){var e=l(g,m,o("action",{name:c,data:t}).data,o);if(null==e||"function"==typeof e.then)return e;r(g=a(g,o("update",e)),p)}:e(t[u]||(t[u]={}),l,c)})}function n(){r(g,p),o("loaded")}function o(t,e){return(h[t]||[]).map(function(t){var n=t(g,m,e,o);null!=n&&(e=n)}),e}function r(e,n){v=s(t.root||(t.root=document.body),v,f,f=o("render",n)(e,m))}function a(t,e){var n={};if("object"!=typeof e||Array.isArray(e))return e;for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}function i(t,e){if("string"==typeof t)var n=document.createTextNode(t);else{for(var n=(e=e||"svg"===t.tag)?document.createElementNS("http://www.w3.org/2000/svg",t.tag):document.createElement(t.tag),o=0;o<t.children.length;)n.appendChild(i(t.children[o++],e));for(var o in t.data)"oncreate"===o?t.data[o](n):u(n,o,t.data[o])}return n}function u(t,e,n,o){if("key"===e);else if("style"===e)for(var r in a(o,n=n||{}))t.style[r]=n[r]||"";else{try{t[e]=n}catch(t){}"function"!=typeof n&&(n?t.setAttribute(e,n):t.removeAttribute(e))}}function l(t,e,n){for(var o in a(e,n)){var r=n[o],i="value"===o||"checked"===o?t[o]:e[o];"onupdate"===o&&r?r(t):r!==i&&u(t,o,r,i)}}function c(t){if(t&&(t=t.data))return t.key}function d(t,e,n){function o(){t.removeChild(e)}(n.data&&n.data.onremove||o)(e,o)}function s(t,e,n,o){if(null==n)e=t.insertBefore(i(o),e);else if(o.tag&&o.tag===n.tag){l(e,n.data,o.data);for(var r=o.children.length,a=n.children.length,u={},f=[],v={},g=0;g<a;g++){var p=e.childNodes[g];f[g]=p;var m=n.children[g],h=c(m);null!=h&&(u[h]=[p,m])}for(var g=0,y=0;y<r;){var p=f[g],m=n.children[g],b=o.children[y],h=c(m);if(v[h])g++;else{var w=c(b),E=u[w]||[];null==w?(null==h&&(s(e,p,m,b),y++),g++):(h===w?(s(e,E[0],E[1],b),g++):E[0]?(e.insertBefore(E[0],p),s(e,E[0],E[1],b)):s(e,p,null,b),y++,v[w]=b)}}for(;g<a;){var m=n.children[g],h=c(m);null==h&&d(e,f[g],m),g++}for(var g in u){var E=u[g],k=E[1];v[k.data.key]||d(e,E[0],k)}}else if(o!==n){var g=e;t.replaceChild(e=i(o),g)}return e}for(var f,v,g={},p=t.view,m={},h={},y=-1,b=t.plugins||[];y<b.length;y++){var w=b[y]?b[y](t):t;null!=w.state&&(g=a(g,w.state)),e(m,w.actions),Object.keys(w.events||[]).map(function(t){h[t]=(h[t]||[]).concat(w.events[t])})}"l"!==document.readyState[0]?n():addEventListener("DOMContentLoaded",n)}({actions:c,state:s,root:f,view:S,events:N})}();